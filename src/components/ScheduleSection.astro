---
import Dialog from "./Dialog.astro";
---

<section>
  <div class="container">
    <div class="img-container">
      <Dialog
        id="dialog_location"
        message="El 18 de Mayo a las 17:00hs, disfrutemos de una hermosa tarde..."
      />
      <div class="inverted">
        <img
          id="rainbow"
          class="img-isu animate__animated invisible"
          src="/img/rainbow-min.webp"
          alt="rainbow"
        />
        <img
          id="img-isu5"
          class="img-isu animate__animated invisible"
          src="/img/Isu_5-min.webp"
          alt="isu"
        />
      </div>
    </div>
  </div>

  <style>
    .container {
      background: radial-gradient(circle, white, var(--green));
    }

    .img-container {
      width: 30rem;
      height: 100%;
      position: relative;
    }

    .inverted {
      --webkit-transform: scaleX(-1);
      transform: scaleX(-1);

      width: 100%;
      height: 80%;
    }

    #img-isu5 {
      animation-delay: 0.5s;
    }

    .img-isu {
      height: 100%;
      filter: drop-shadow(-5px 5px 2px var(--dark-pink));
      margin: auto;

      position: absolute;
      right: -5rem;
      bottom: 0;
    }
  </style>
</section>

<script>
  const imgIsu = document.querySelector("#img-isu5");

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        if (imgIsu) {
          imgIsu.classList.add("animate__slideInRight", "visible");
        }

        const dialog = document.querySelector("#dialog_location");
        if (dialog) {
          dialog.classList.add("animate__fadeIn", "visible");
        }

        const rainbow = document.querySelector("#rainbow");
        if (rainbow) {
          rainbow.classList.add("animate__rotateInDownLeft", "visible");
        }
      }
    });
  });

  if (imgIsu) {
    observer.observe(imgIsu);
  }
</script>
